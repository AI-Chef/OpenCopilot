# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

image:
  file: .gitpod.Dockerfile
  
tasks:
  - init: |
      mkdir -p ~/.ssh
      echo "Host github.com" > ~/.ssh/config
      echo "  IdentityFile ~/.ssh/id_rsa" >> ~/.ssh/config
      chmod 600 ~/.ssh/config
      echo "$SSH_PRIVATE_KEY" | base64 -d > ~/.ssh/id_rsa
      chmod 600 ~/.ssh/id_rsa
      
      # Add the SSH key to the SSH agent
      eval $(ssh-agent -s)
      ssh-add ~/.ssh/id_rsa

env:
  SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}